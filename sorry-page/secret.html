<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Secret for Name of your loved one</title>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600&family=Arial&display=swap" rel="stylesheet">
    <style>
        body {
            margin: 0;
            padding: 0;
            background-color: black;
            color: white;
            font-family: 'Quicksand', sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            overflow: hidden;
        }

        #canvas-container {
            position: relative;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        canvas {
            display: block;
        }

        .controls {
            position: absolute;
            bottom: 30px;
            display: flex;
            gap: 20px;
            z-index: 10;
        }

        .btn {
            padding: 12px 30px;
            border-radius: 50px;
            font-weight: bold;
            text-decoration: none;
            cursor: pointer;
            transition: transform 0.3s ease;
            font-family: 'Quicksand', sans-serif;
            border: none;
        }

        .back-btn {
            background-color: #ff6b6b;
            color: white;
        }

        .replay-btn {
            background-color: white;
            color: black;
        }

        .btn:hover {
            transform: scale(1.1);
        }
    </style>
</head>
<body>

    <div id="canvas-container">
        <canvas id="heartCanvas"></canvas>
    </div>

    <div class="controls">
        <a href="index.html" class="btn back-btn">Go Back</a>
        <button id="replayBtn" class="btn replay-btn">Replay</button>
    </div>

    <script>
        const canvas = document.getElementById('heartCanvas');
        const ctx = canvas.getContext('2d');
        let animationId;
        
        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        
        window.addEventListener('resize', resizeCanvas);
        resizeCanvas();

        // Turtle-like Helper Functions
        function toRad(deg) {
            return deg * Math.PI / 180;
        }

        async function drawHeart() {
            // Clear screen
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Setup
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2 + 50; // Shift down slightly
            
            ctx.lineCap = 'round';
            ctx.lineJoin = 'round';
            ctx.lineWidth = 3;
            ctx.strokeStyle = 'red';
            ctx.fillStyle = 'red';
            
            // Drawing Path logic (simulating the Turtle steps)
            // 1. Start
            // 2. left(140) -> from facing Right (0), angle becomes -140 (or 220)
            // 3. forward(180)
            // 4. circle(-90, 200)
            // 5. left(120)
            // 6. circle(-90, 200)
            // 7. forward(180)
            
            // We'll calculate points for a smooth animation
            let points = [];
            
            // Initial Position
            let x = centerX;
            let y = centerY - 100; // Start higher up
            let angle = -90; // Facing Up (Turtle standard is usually Right=0, but let's say Up=-90)
            // Wait, Turtle standard: 0 is Right.
            // pen.left(140) -> 140 deg.
            
            // Let's just hardcode the path of a heart for better reliability than emulating turtle math exactly
            // A standard heart curve parametric equation or Bezier
            
            // Starting point (bottom tip usually, but Turtle started at top-ish?)
            // Let's trace the turtle path mentally:
            // Start (0,0). Left 140 -> Angle 140. Forward 180. 
            // Then curve right. Then turn left. Then curve right. Then forward.
            // This draws the left side, then right side.
            
            // Let's use a standard Bezier heart for simplicity and beauty
            // Start at top center
            
            const scale = 3.5;
            
            // Animation Loop
            let progress = 0;
            const speed = 0.015; // Animation speed
            
            return new Promise(resolve => {
                function animate() {
                    progress += speed;
                    if (progress > 1) progress = 1;
                    
                    // Clear and redraw path up to progress
                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                    
                    // Draw Heart Outline
                    ctx.beginPath();
                    // M 0 -150
                    // C -150 -250 -350 -50 0 150
                    // C 350 -50 150 -250 0 -150
                    
                    // Using a parametric heart equation for easier progressive drawing
                    // x = 16sin^3(t)
                    // y = 13cos(t) - 5cos(2t) - 2cos(3t) - cos(4t)
                    
                    ctx.save();
                    ctx.translate(centerX, centerY - 50);
                    ctx.scale(scale, -scale); // Flip Y so +y is up
                    
                    ctx.beginPath();
                    for (let t = 0; t <= progress * Math.PI * 2; t += 0.05) {
                        let px = 16 * Math.pow(Math.sin(t), 3);
                        let py = 13 * Math.cos(t) - 5 * Math.cos(2*t) - 2 * Math.cos(3*t) - Math.cos(4*t);
                        if (t===0) ctx.moveTo(px, py);
                        else ctx.lineTo(px, py);
                    }
                    ctx.stroke();
                    
                    // If finished outline, fill it
                    if (progress >= 1) {
                         ctx.fillStyle = 'red';
                         ctx.fill();
                    }
                    
                    ctx.restore();
                    
                    if (progress < 1) {
                        animationId = requestAnimationFrame(animate);
                    } else {
                        // Finished Heart, Write Text
                        setTimeout(() => {
                            writeText();
                            resolve();
                        }, 500);
                    }
                }
                animate();
            });
        }

        function writeText() {
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            
            ctx.font = "bold 40px Arial";
            ctx.fillStyle = "white";
            ctx.textAlign = "center";
            ctx.textBaseline = "middle";
            ctx.fillText("Name of your loved one", centerX, centerY - 50);
        }

        // Auto-loop
        async function runLoop() {
            while (true) {
                await drawHeart();
                await new Promise(r => setTimeout(r, 2000)); // Wait 2s before clearing
            }
        }

        // Start
        runLoop();

        // Replay Button (resets loop)
        document.getElementById('replayBtn').addEventListener('click', () => {
             // It's already looping, but we could force restart
             // For now, simple loop is fine
        });

    </script>
</body>
</html>
